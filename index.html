<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Retro Arcade</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Courier New', Courier, monospace;
      background-color: #1a001a;
      overflow-x: hidden;
    }
    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      overflow: hidden;
    }
    .square {
      position: absolute;
      width: 100px;
      height: 100px;
      background-color: rgba(255, 255, 255, 0.05);
      animation: floatSquare linear infinite;
    }
    @keyframes floatSquare {
      0% { transform: translateY(100vh) rotate(0deg); }
      100% { transform: translateY(-200px) rotate(360deg); }
    }
    .grid-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: 350px;
      gap: 20px;
      padding: 40px;
    }
    .game-box {
      background-color: #2e003e;
      border-radius: 15px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    .game-box canvas {
      border-radius: 10px;
      background: #000;
    }
    .play-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #a020f0;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
      z-index: 2;
    }
  </style>
</head>
<body>
  <div class="bg-animation" id="bg-container"></div>
  <div class="grid-container">
    <div class="game-box">
      <button class="play-button" onclick="startGame(0)">Play</button>
      <canvas id="game0" width="400" height="300"></canvas>
    </div>
    <div class="game-box">
      <button class="play-button" onclick="startGame(1)">Play</button>
      <canvas id="game1" width="400" height="300"></canvas>
    </div>
    <div class="game-box">
      <button class="play-button" onclick="startGame(2)">Play</button>
      <canvas id="game2" width="400" height="300"></canvas>
    </div>
    <div class="game-box">
      <button class="play-button" onclick="startGame(3)">Play</button>
      <canvas id="game3" width="400" height="300"></canvas>
    </div>
    <!-- Add 8 more rows x 3 columns if needed -->
  </div>
  <script>
    // Generate background squares
    const bgContainer = document.getElementById('bg-container');
    for (let i = 0; i < 20; i++) {
      const square = document.createElement('div');
      square.classList.add('square');
      square.style.left = `${Math.random() * 100}vw`;
      square.style.animationDuration = `${8 + Math.random() * 10}s`;
      square.style.animationDelay = `${Math.random() * 5}s`;
      square.style.transform = `rotate(${Math.random() * 360}deg)`;
      bgContainer.appendChild(square);
    }

    // State control
    const contexts = [];
    const animations = [null, null, null, null];
    const playButtons = document.querySelectorAll('.play-button');

    function resetOtherGames(except) {
      for (let i = 0; i < 4; i++) {
        if (i !== except) {
          cancelAnimationFrame(animations[i]);
          const ctx = contexts[i];
          if (ctx) ctx.clearRect(0, 0, 400, 300);
          playButtons[i].style.display = 'block';
        }
      }
    }

    function startGame(index) {
      resetOtherGames(index);
      playButtons[index].style.display = 'none';
      switch (index) {
        case 0: gravitySwitcher(index); break;
        case 1: wallJumper(index); break;
        case 2: laserDodger(index); break;
        case 3: mysteryGame(index); break;
      }
    }

    // Helper for timers
    function drawTimer(ctx, time) {
      ctx.fillStyle = 'white';
      ctx.font = '16px monospace';
      ctx.fillText(`Time: ${Math.floor(time / 1000)}s`, 10, 20);
    }

    // GAME 1: GRAVITY SWITCHER
    function gravitySwitcher(index) {
      const canvas = document.getElementById(`game${index}`);
      const ctx = canvas.getContext('2d');
      contexts[index] = ctx;
      const player = { x: 50, y: 250, size: 20, gravity: 1 };
      const obstacles = [];
      let lastSpawn = 0;
      let time = 0;

      function spawnObstacle() {
        obstacles.push({ x: 400, y: player.gravity > 0 ? 280 : 0, width: 20, height: 20 });
      }

      document.onkeydown = (e) => {
        if (e.key === 'w') player.gravity = -1;
        if (e.key === 's') player.gravity = 1;
      };

      function loop(ts) {
        ctx.clearRect(0, 0, 400, 300);
        time += 16;

        if (ts - lastSpawn > 1500 - Math.min(time / 10, 1000)) {
          spawnObstacle();
          lastSpawn = ts;
        }

        // Player transition
        player.y += (player.gravity > 0 ? 1 : -1) * (player.y < 280 && player.gravity > 0 || player.y > 0 && player.gravity < 0 ? 4 : 0);
        player.y = Math.max(0, Math.min(280, player.y));

        // Draw player
        ctx.fillStyle = 'lime';
        ctx.fillRect(player.x, player.y, player.size, player.size);

        // Move and draw obstacles
        ctx.fillStyle = 'red';
        for (let obs of obstacles) {
          obs.x -= 2 + time / 5000;
          ctx.fillRect(obs.x, obs.y, obs.width, obs.height);

          if (
            obs.x < player.x + player.size &&
            obs.x + obs.width > player.x &&
            obs.y < player.y + player.size &&
            obs.y + obs.height > player.y
          ) {
            playButtons[index].style.display = 'block';
            return;
          }
        }

        drawTimer(ctx, time);
        animations[index] = requestAnimationFrame(loop);
      }

      loop(0);
    }

    // GAME 2: WALL JUMPER (will continue in next response)
  </script>
</body>
</html>
